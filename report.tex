\documentclass{article}

\usepackage{enumerate}
\usepackage[bottom=1in,top=1in]{geometry}
\usepackage{parskip}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{multirow}
\usepackage{amssymb}
\usepackage[pdftex,colorlinks,urlcolor=blue]{hyperref}

\geometry{letterpaper}

\begin{document}

\title{CS276 PA4 Report}

\author{
  Jiawei Yao\\
  \texttt{jwyao@stanford.edu}
  \and
  Wei Wei\\
  \texttt{wwei2@stanford.edu}
}

\maketitle

\section{Task 1 - Pointwise Approach with Linear Regression}

In pointwise approach, we use \texttt{LinearRegression} model with TF-IDF features.
We apply the following tweaks to TF-IDF features:

\begin{itemize}
    \item add-one smoothing on IDF
    \item sublinear on raw term frequencies
    \item body length normalization with added length of 900
\end{itemize}

After the model has been trained, for documents of given query, we use \texttt{Collections.sort} on the documents with a comparator such that
for two documents $d_1,d_2$, the one with higher score from the trained LR model is ranked higher.

NDCG on train and dev datasets:

\begin{table}[!htb]
    \centering
    \begin{tabular}{| r | l | l |}
        \hline
        & \textbf{Train} & \textbf {Dev.} \\
        \hline
        \textbf{LR} & 0.8705 & 0.8420 \\
        \hline
    \end{tabular}
    \caption{NDCG on Task 1}
\end{table}

\section{Task 2 - Pairwise Approach and Ranking SVM}

For this task, we use the same TF-IDF features as in Task 1 with the same tweaks.

In training SVM, the following techniques are used:

\begin{itemize}
    \item use \texttt{Standardize} to standardize document features (not the differences)
    \item generate evenly distribtued features for each label by computing differences of document features
\end{itemize}

\texttt{Collections.sort} is used to rank documents of a same query.
For documents $d_1,d_2$, the comparator

\begin{enumerate}
    \item standardizes the document features with \emph{the same} \texttt{Standardize} from training
    \item computes the difference
    \item feeds the difference vector to the trained SVM
        \begin{itemize}
            \item if the label output is positive, $d_1$ is ranked higher
            \item otherwise $d_1$ is considered as \emph{not higher than} $d_2$\footnote{In this case, we let the sort algorithm to break tie.}
        \end{itemize}
\end{enumerate}

For Linear SVM, we used default parameters. For RBF SVM, we used $C=8.0,\gamma=0.001$.

NDCG on train and dev datasets:

\begin{table}[!htb]
    \centering
    \begin{tabular}{| r | l | l |}
        \hline
        & \textbf{Train} & \textbf {Dev.} \\
        \hline
        \textbf{Linear SVM} & 0.8653 & 0.8463 \\
        \hline
        \textbf{RBF SVM} & 0.8660 & 0.8458 \\
        \hline
    \end{tabular}
    \caption{NDCG on Task 2}
\end{table}

\section{Task 3 - More Features and Error Analysis}

\begin{table}[!htb]
  \centering
  \begin{tabular}{|c|c|c|c|c|c|c|}
    \hline
    \multirow{2}{*}{bm25} & \multirow{2}{*}{window} & \multirow{2}{*}{pagerank} & \multicolumn{2}{c|}{Linear SVM} & \multicolumn{2}{c|}{Non-linear SVM} \\ \cline{4-7}
                          & & & train & dev & train & dev \\ \cline{4-7}
    \hline
    \checkmark & & & 87.16 & 85.57 & & \\
    \hline
    & \checkmark & & 86.53 & 84.62 & & \\
    \hline
    & & \checkmark & 87.36 & 85.22 & & \\
    \hline
    \checkmark & \checkmark & & 87.16 & 85.53 & & \\
    \hline
    & \checkmark & \checkmark & 87.37 & 85.16 & & \\
    \hline
    \checkmark & & \checkmark & 87.06 & 85.56 & & \\
    \hline
    \checkmark & \checkmark & \checkmark & 86.53 & 84.63 & & \\
    \hline
  \end{tabular}
  \caption{Results for task 3}
\end{table}

\section{Extra Credit}

For extra credit, we use SVM regression feature provided for the pointwise approach.
Specifically, we use NuSVR SVM with RBF kernel, $C=16.0,\nu=0.25$. We also tried standardizing data but that was not as good as expected.

NDCG on train and dev datasets (numbers in parentheses are improvement over Task 1):

\begin{table}[!htb]
    \centering
    \begin{tabular}{| r | l | l |}
        \hline
        & \textbf{Train} & \textbf {Dev.} \\
        \hline
        \textbf{NuSVR} & 0.8669 (-0.42\%) & 0.8483 (0.75\%) \\
        \hline
        \textbf{NuSVR w/ Std.} & 0.8770 (0.74\%) & 0.8328 (-1.09\%) \\
        \hline
    \end{tabular}
    \caption{NDCG on Task 1}
\end{table}

We can see that NuSVR generalizes better than linear regression - NDCG performance is slightly lower on train set but higher on dev set.

\end{document}
